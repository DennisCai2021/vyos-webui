/* VyOS WebUI Configuration Node Definition */

conf_mode: vyos_webui {
    varlog "/var/log/vyos-webui";
    user "vyos-webui";
    group "vyos-webui";
}

node_modules vyos-webui {
    module vyos-1x;
    package vyos-1x;

    help "VyOS Web-based Administration Interface";

    tag service {
        help "WebUI service configuration";

        leaf enabled {
            type boolean;
            default true;
            help "Enable or disable the WebUI service";
        }

        leaf port {
            type uint16 {
                range "1-65535";
            }
            default 443;
            help "HTTPS port for WebUI";
        }

        leaf listen-address {
            type string;
            default "0.0.0.0";
            help "Listen address for WebUI";
        }

        leaf api-port {
            type uint16 {
                range "1-65535";
            }
            default 8000;
            help "API service port (internal)";
        }

        container session {
            help "Session configuration";

            leaf timeout {
                type uint32;
                default 30;
                units "minutes";
                help "Session idle timeout";
            }

            leaf max-sessions {
                type uint32;
                default 10;
                help "Maximum concurrent sessions";
            }
        }

        container security {
            help "Security configuration";

            leaf cert-file {
                type string;
                help "SSL certificate file path";
            }

            leaf key-file {
                type string;
                help "SSL private key file path";
            }

            leaf auto-cert {
                type boolean;
                default true;
                help "Automatically generate self-signed certificate";
            }

            leaf rate-limit {
                type boolean;
                default true;
                help "Enable API rate limiting";
            }

            leaf csrf-protection {
                type boolean;
                default true;
                help "Enable CSRF protection";
            }
        }

        container logging {
            help "Logging configuration";

            leaf level {
                type enum {
                    error "Error only";
                    warning "Warnings and errors";
                    info "Informational messages";
                    debug "Debug messages";
                }
                default info;
                help "Log level";
            }

            leaf access-log {
                type boolean;
                default true;
                help "Enable access logging";
            }
        }

        container auth {
            help "Authentication configuration";

            leaf mfa {
                type boolean;
                default false;
                help "Enable multi-factor authentication";
            }

            leaf local-users {
                type boolean;
                default true;
                help "Use local user accounts";
            }

            leaf radius-server {
                type string;
                help "RADIUS server for authentication";
            }
        }
    }
}
